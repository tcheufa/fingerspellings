import{s as le,l as R,e as y,a as S,c as k,b as z,r as B,g as j,f as w,p as u,i as q,h as b,u as x,m as F,o as J,q as oe,y as ae,E as ie,w as re,v as Y,n as ce}from"./scheduler.VvEOAcGf.js";import{S as ue,i as fe,t as K,a as Q}from"./index.DdEy3NLK.js";import{e as X}from"./each.D6YF6ztN.js";function de(s,t){const e={video:!0};navigator.mediaDevices.getUserMedia(e).then(l=>{s.srcObject=l,s.addEventListener("loadeddata",t),s.play()})}const _e=s=>({}),Z=s=>({});function $(s,t,e){const l=s.slice();return l[16]=t[e].icon,l[17]=t[e].name,l[18]=t[e].action,l}const he=s=>({}),ee=s=>({});function te(s){let t,e='<p class="text-white text-xl font-bold">PAUSED</p>';return{c(){t=y("div"),t.innerHTML=e,this.h()},l(l){t=k(l,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),B(t)!=="svelte-tzt92f"&&(t.innerHTML=e),this.h()},h(){u(t,"id","status"),u(t,"class","absolute top-0 left-0 size-full flex items-center justify-center")},m(l,h){q(l,t,h)},d(l){l&&w(t)}}}function me(s){let t,e="Caption here";return{c(){t=y("p"),t.textContent=e,this.h()},l(l){t=k(l,"P",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-180oi5j"&&(t.textContent=e),this.h()},h(){u(t,"class","bg-black mx-auto w-fit p-1 mb-1 text-sm text-yellow-300 text-center text-")},m(l,h){q(l,t,h)},p:ce,d(l){l&&w(t)}}}function se(s){let t,e,l,h,r;return{c(){t=y("button"),e=y("img"),this.h()},l(c){t=k(c,"BUTTON",{type:!0,title:!0});var o=z(t);e=k(o,"IMG",{src:!0,title:!0,alt:!0,class:!0}),o.forEach(w),this.h()},h(){ie(e.src,l=s[16])||u(e,"src",l),u(e,"title",s[17]),u(e,"alt",s[17]),u(e,"class","btn btn-icon-sm rounded-full p-1 bg-slate-200"),u(t,"type","button"),u(t,"title",s[17])},m(c,o){q(c,t,o),b(t,e),h||(r=re(t,"click",s[18]),h=!0)},p(c,o){s=c},d(c){c&&w(t),h=!1,r()}}}function ge(s){let t,e,l,h='<track kind="captions"/>',r,c,o,E,C,M,L,V,P,U,m,T,p,f=s[1]&&!s[0]&&te();const a=s[10].caption,D=R(a,s,s[9],ee),g=D||me();let I=X(s[7]),d=[];for(let n=0;n<I.length;n+=1)d[n]=se($(s,I,n));const G=s[10].controlPlus,v=R(G,s,s[9],Z);return{c(){t=y("div"),e=y("div"),l=y("video"),l.innerHTML=h,r=S(),c=y("div"),o=y("canvas"),C=S(),f&&f.c(),L=S(),V=y("div"),P=y("div"),g&&g.c(),U=S(),m=y("div");for(let n=0;n<d.length;n+=1)d[n].c();T=S(),v&&v.c(),this.h()},l(n){t=k(n,"DIV",{class:!0});var _=z(t);e=k(_,"DIV",{id:!0,class:!0});var i=z(e);l=k(i,"VIDEO",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-1vi6nvx"&&(l.innerHTML=h),r=j(i),c=k(i,"DIV",{class:!0});var H=z(c);o=k(H,"CANVAS",{class:!0}),z(o).forEach(w),H.forEach(w),C=j(i),f&&f.l(i),i.forEach(w),L=j(_),V=k(_,"DIV",{class:!0});var N=z(V);P=k(N,"DIV",{class:!0});var A=z(P);g&&g.l(A),U=j(A),m=k(A,"DIV",{class:!0});var W=z(m);for(let O=0;O<d.length;O+=1)d[O].l(W);T=j(W),v&&v.l(W),W.forEach(w),A.forEach(w),N.forEach(w),_.forEach(w),this.h()},h(){u(l,"class","min-h-72 min-w-80 rounded-md [transform:rotateY(-180deg)]"),u(o,"class","size-full"),u(c,"class",E="absolute left-0 top-0 size-full "+s[5]+" [transform:rotateY(-180deg)]"),u(e,"id","video-container"),u(e,"class",M="container max-w-fit relative z-[2] "+s[6]+" rounded-md cursor-pointer"),u(m,"class","bg-black w-full py-1 rounded-se-3xl rounded-tl-3xl flex justify-around"),u(P,"class","min-w-full"),u(V,"class","absolute bottom-0 w-full z-[2]"),u(t,"class","size-fit mx-auto relative")},m(n,_){q(n,t,_),b(t,e),b(e,l),s[11](l),b(e,r),b(e,c),b(c,o),s[12](o),s[13](c),b(e,C),f&&f.m(e,null),b(t,L),b(t,V),b(V,P),g&&g.m(P,null),b(P,U),b(P,m);for(let i=0;i<d.length;i+=1)d[i]&&d[i].m(m,null);b(m,T),v&&v.m(m,null),p=!0},p(n,[_]){if((!p||_&32&&E!==(E="absolute left-0 top-0 size-full "+n[5]+" [transform:rotateY(-180deg)]"))&&u(c,"class",E),n[1]&&!n[0]?f||(f=te(),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!p||_&64&&M!==(M="container max-w-fit relative z-[2] "+n[6]+" rounded-md cursor-pointer"))&&u(e,"class",M),D&&D.p&&(!p||_&512)&&x(D,a,n,n[9],p?J(a,n[9],_,he):F(n[9]),ee),_&128){I=X(n[7]);let i;for(i=0;i<I.length;i+=1){const H=$(n,I,i);d[i]?d[i].p(H,_):(d[i]=se(H),d[i].c(),d[i].m(m,T))}for(;i<d.length;i+=1)d[i].d(1);d.length=I.length}v&&v.p&&(!p||_&512)&&x(v,G,n,n[9],p?J(G,n[9],_,_e):F(n[9]),Z)},i(n){p||(K(g,n),K(v,n),p=!0)},o(n){Q(g,n),Q(v,n),p=!1},d(n){n&&w(t),s[11](null),s[12](null),s[13](null),f&&f.d(),g&&g.d(n),oe(d,n),v&&v.d(n)}}}const ne="/svg";function ve(s,t,e){let{$$slots:l={},$$scope:h}=t,{video:r}=t,{onCanvasProcess:c=a=>{}}=t,o,E,{playing:C=!1}=t,{ready:M=!1}=t;function L(){e(0,C=!C),C?r.play():r.pause()}const V=()=>e(2,r.muted=!r.muted,r),P=[{icon:`${ne}/muted.svg`,name:"Mute/Unmute",action:V},{icon:`${ne}/pause.svg`,name:"Play/Pause",action:L}];let U,m;ae(async()=>{var g;const a=()=>{var I;return!!((I=navigator.mediaDevices)!=null&&I.getUserMedia)},D=o.getContext("2d");if(!D){console.warn("Canvas context has a problem."),alert("An error occured while attempting to load canvas");return}a()?(console.log("Mounting on Webcam:",D),(g=document.getElementById("video-container"))==null||g.addEventListener("click",()=>{if(!M){de(r,()=>{e(3,o.height=r.videoWidth,o),e(3,o.width=r.videoHeight,o),e(3,o.style.height=E.style.width,o),e(3,o.style.width=E.style.height,o),console.log("Mounting on Enablecam:",D),c(D),e(2,r.onplay=()=>c(D),r)}),e(1,M=!0),e(0,C=!0);return}console.log(o),L()})):console.warn("getUserMedia() is not supported by your browser")});function T(a){Y[a?"unshift":"push"](()=>{r=a,e(2,r)})}function p(a){Y[a?"unshift":"push"](()=>{o=a,e(3,o)})}function f(a){Y[a?"unshift":"push"](()=>{E=a,e(4,E)})}return s.$$set=a=>{"video"in a&&e(2,r=a.video),"onCanvasProcess"in a&&e(8,c=a.onCanvasProcess),"playing"in a&&e(0,C=a.playing),"ready"in a&&e(1,M=a.ready),"$$scope"in a&&e(9,h=a.$$scope)},s.$$.update=()=>{s.$$.dirty&3&&(M&&!C?(e(6,m="bg-black"),e(5,U="bg-black opacity-50"),console.log("paused")):(e(6,m="bg-sky-600"),e(5,U=""),console.log("resume")))},[C,M,r,o,E,U,m,P,c,h,l,T,p,f]}class ke extends ue{constructor(t){super(),fe(this,t,ve,ge,le,{video:2,onCanvasProcess:8,playing:0,ready:1})}}export{ke as W};
