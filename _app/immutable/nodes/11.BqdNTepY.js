import{s as ye,v as Z,e as O,a as L,c as S,b as j,g as D,r as W,f as v,p as E,i as C,h as N,w as M,x,q as ce,k as Te,y as we,z as Ce,A as ee,t as F,d as I,C as R,B as Ne,j as fe,n as X}from"../chunks/scheduler.VvEOAcGf.js";import{S as Oe,i as Se,e as te,c as J,b as K,m as G,t as P,a as U,f as ue,d as Q,g as le,h as de}from"../chunks/index.DdEy3NLK.js";import{e as $}from"../chunks/each.D6YF6ztN.js";import{f as ne}from"../chunks/index.CY-iSCNX.js";import{H as Ae,o as Ee}from"../chunks/HandTrackSettings.BosQHSLf.js";import{W as Le}from"../chunks/Webcam.UPlAS8BV.js";import{X as De,k as Fe,l as Ie,N as Pe,A as He,F as Me}from"../chunks/index.DwqczJVo.js";const Ue=async()=>({}),et=Object.freeze(Object.defineProperty({__proto__:null,load:Ue},Symbol.toStringTag,{value:"Module"})),je={};function se(o,e,t){const l=o.slice();return l[3]=e[t],l[30]=t,l}function oe(o,e,t){const l=o.slice();return l[31]=e[t],l[33]=t,l}function ae(o){let e,t,l,i;return t=new Ae({}),{c(){e=O("div"),J(t.$$.fragment),this.h()},l(s){e=S(s,"DIV",{class:!0});var a=j(e);K(t.$$.fragment,a),a.forEach(v),this.h()},h(){E(e,"class","bg-tertiary-600 p-3 rounded-md absolute top-1 left-0 z-10")},m(s,a){C(s,e,a),G(t,e,null),i=!0},i(s){i||(P(t.$$.fragment,s),s&&Ce(()=>{i&&(l||(l=le(e,ne,{x:-10,duration:500},!0)),l.run(1))}),i=!0)},o(s){U(t.$$.fragment,s),s&&(l||(l=le(e,ne,{x:-10,duration:500},!1)),l.run(0)),i=!1},d(s){s&&v(e),Q(t),s&&l&&l.end()}}}function Be(o){let e,t,l,i;return{c(){e=O("div"),t=O("input"),this.h()},l(s){e=S(s,"DIV",{class:!0});var a=j(e);t=S(a,"INPUT",{class:!0}),a.forEach(v),this.h()},h(){E(t,"class","min-w-fit p-1 text-center text-sm text-yellow-300 bg-black border-none"),E(e,"class","container flex justify-center mb-1")},m(s,a){C(s,e,a),N(e,t),R(t,o[8]),l||(i=M(t,"input",o[17]),l=!0)},p(s,a){a[0]&256&&t.value!==s[8]&&R(t,s[8])},i:X,o:X,d(s){s&&v(e),l=!1,i()}}}function Ve(o){let e,t;return e=new Me({}),{c(){J(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,i){G(e,l,i),t=!0},p:X,i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){U(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function We(o){let e,t,l,i;const s=[Ve,Be],a=[];function _(p,b){return p[5]?0:1}return e=_(o),t=a[e]=s[e](o),{c(){t.c(),l=ee()},l(p){t.l(p),l=ee()},m(p,b){a[e].m(p,b),C(p,l,b),i=!0},p(p,b){let h=e;e=_(p),e===h?a[e].p(p,b):(de(),U(a[h],1,1,()=>{a[h]=null}),ue(),t=a[e],t?t.p(p,b):(t=a[e]=s[e](p),t.c()),P(t,1),t.m(l.parentNode,l))},i(p){i||(P(t),i=!0)},o(p){U(t),i=!1},d(p){p&&v(l),a[e].d(p)}}}function ze(o){let e,t='<img src="/svg/keyboard.svg" title="keyboard" alt="keyboard" class="btn btn-icon-sm rounded-full p-1 bg-slate-200"/>',l,i,s="Toggle Prediction",a,_,p,b,h,r,u="Add",g,n,A="Save",H,y;return{c(){e=O("button"),e.innerHTML=t,l=L(),i=O("button"),i.textContent=s,a=L(),_=O("label"),p=F(`Add with label
                `),b=O("input"),h=L(),r=O("button"),r.textContent=u,g=L(),n=O("button"),n.textContent=A,this.h()},l(d){e=S(d,"BUTTON",{type:!0,title:!0,"data-svelte-h":!0}),W(e)!=="svelte-p1excn"&&(e.innerHTML=t),l=D(d),i=S(d,"BUTTON",{"data-svelte-h":!0}),W(i)!=="svelte-dmpam2"&&(i.textContent=s),a=D(d),_=S(d,"LABEL",{for:!0});var c=j(_);p=I(c,`Add with label
                `),b=S(c,"INPUT",{type:!0}),h=D(c),r=S(c,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),W(r)!=="svelte-11i50tb"&&(r.textContent=u),c.forEach(v),g=D(d),n=S(d,"BUTTON",{"data-svelte-h":!0}),W(n)!=="svelte-151sx4g"&&(n.textContent=A),this.h()},h(){E(e,"type","button"),E(e,"title","keyboard"),E(b,"type","text"),E(r,"id","add"),E(r,"class","bg-yellow-800"),E(_,"for","add")},m(d,c){C(d,e,c),C(d,l,c),C(d,i,c),C(d,a,c),C(d,_,c),N(_,p),N(_,b),R(b,o[3]),N(_,h),N(_,r),C(d,g,c),C(d,n,c),H||(y=[M(e,"click",o[9]),M(i,"click",o[10]),M(b,"input",o[15]),M(r,"click",o[16]),M(n,"click",o[12])],H=!0)},p(d,c){c[0]&8&&b.value!==d[3]&&R(b,d[3])},d(d){d&&(v(e),v(l),v(i),v(a),v(_),v(g),v(n)),H=!1,Ne(y)}}}function ie(o){let e,t,l=o[31]+"",i;return{c(){e=F(o[33]),t=F(": "),i=F(l)},l(s){e=I(s,o[33]),t=I(s,": "),i=I(s,l)},m(s,a){C(s,e,a),C(s,t,a),C(s,i,a)},p(s,a){a[0]&4&&l!==(l=s[31]+"")&&fe(i,l)},d(s){s&&(v(e),v(t),v(i))}}}function re(o){let e,t,l=o[3]+"",i,s,a,_,p,b,h=$(o[2][o[30]]),r=[];for(let u=0;u<h.length;u+=1)r[u]=ie(oe(o,h,u));return{c(){e=F(`...
            `),t=O("details"),i=F(l),s=F(`:
                `),a=O("details"),_=F(o[30]),p=L();for(let u=0;u<r.length;u+=1)r[u].c();b=L()},l(u){e=I(u,`...
            `),t=S(u,"DETAILS",{});var g=j(t);i=I(g,l),s=I(g,`:
                `),a=S(g,"DETAILS",{});var n=j(a);_=I(n,o[30]),p=D(n);for(let A=0;A<r.length;A+=1)r[A].l(n);n.forEach(v),b=D(g),g.forEach(v)},m(u,g){C(u,e,g),C(u,t,g),N(t,i),N(t,s),N(t,a),N(a,_),N(a,p);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(a,null);N(t,b)},p(u,g){if(g[0]&2&&l!==(l=u[3]+"")&&fe(i,l),g[0]&4){h=$(u[2][u[30]]);let n;for(n=0;n<h.length;n+=1){const A=oe(u,h,n);r[n]?r[n].p(A,g):(r[n]=ie(A),r[n].c(),r[n].m(a,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=h.length}},d(u){u&&(v(e),v(t)),ce(r,u)}}}function Re(o){let e,t,l,i,s,a,_,p="Toggle <br/> Options",b,h,r,u,g,n=o[4]&&ae();function A(f){o[18](f)}function H(f){o[19](f)}let y={onCanvasProcess:o[11],$$slots:{controlPlus:[ze],caption:[We]},$$scope:{ctx:o}};o[6]!==void 0&&(y.video=o[6]),o[7]!==void 0&&(y.playing=o[7]),l=new Le({props:y}),Z.push(()=>te(l,"video",A)),Z.push(()=>te(l,"playing",H));let d=$(o[1]),c=[];for(let f=0;f<d.length;f+=1)c[f]=re(se(o,d,f));return{c(){e=O("div"),n&&n.c(),t=L(),J(l.$$.fragment),a=L(),_=O("button"),_.innerHTML=p,b=L(),h=O("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=S(f,"DIV",{class:!0});var k=j(e);n&&n.l(k),t=D(k),K(l.$$.fragment,k),a=D(k),_=S(k,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(_)!=="svelte-lk6k1k"&&(_.innerHTML=p),b=D(k),h=S(k,"DIV",{class:!0});var T=j(h);for(let w=0;w<c.length;w+=1)c[w].l(T);T.forEach(v),k.forEach(v),this.h()},h(){E(_,"type","button"),E(_,"class","btn bg-secondary-600 absolute right-3 top-1 z-20"),E(h,"class","min-h-10 w-full bg-slate-400 text-black"),E(e,"class","min-w-full min-h-full mx-2 relative flex flex-col justify-center items-center")},m(f,k){C(f,e,k),n&&n.m(e,null),N(e,t),G(l,e,null),N(e,a),N(e,_),N(e,b),N(e,h);for(let T=0;T<c.length;T+=1)c[T]&&c[T].m(h,null);r=!0,u||(g=M(_,"click",o[20]),u=!0)},p(f,k){f[4]?n?k[0]&16&&P(n,1):(n=ae(),n.c(),P(n,1),n.m(e,t)):n&&(de(),U(n,1,1,()=>{n=null}),ue());const T={};if(k[0]&297|k[1]&8&&(T.$$scope={dirty:k,ctx:f}),!i&&k[0]&64&&(i=!0,T.video=f[6],x(()=>i=!1)),!s&&k[0]&128&&(s=!0,T.playing=f[7],x(()=>s=!1)),l.$set(T),k[0]&6){d=$(f[1]);let w;for(w=0;w<d.length;w+=1){const B=se(f,d,w);c[w]?c[w].p(B,k):(c[w]=re(B),c[w].c(),c[w].m(h,null))}for(;w<c.length;w+=1)c[w].d(1);c.length=d.length}},i(f){r||(P(n),P(l.$$.fragment,f),r=!0)},o(f){U(n),U(l.$$.fragment,f),r=!1},d(f){f&&v(e),n&&n.d(),Q(l),ce(c,f),u=!1,g()}}}let $e=.001,qe=2;function Xe(o,e,t){let l;Te(o,Ee,m=>t(27,l=m));let i=!1,s=!1,a=-1,_=0,p=0,b,h=[],r=[],u,g=!1,n=!1;const A=()=>t(5,g=!g),H=()=>{t(14,n=!n),t(7,f=!0)};let y,d,c,f,k,T;we(async()=>{console.log("Resolving...");const m=await De.forVisionTasks("/wasm");console.log("Creating landmark detector..."),console.log("Exporting the model..."),c=await Fe.createFromOptions(m,l),console.log("Model loaded successfully"),console.log(c)});const w=()=>{d=Ie("http://127.0.0.1:5000"),d.on("response",function(m){console.log("Response from the server:",m),t(8,k+=m)})},B=m=>{if(((y==null?void 0:y.currentTime)??0)-_>=$e){if(_=y.currentTime,!c){alert("Wait! objectDetector not loaded yet.");return}m==null||m.save(),m==null||m.clearRect(0,0,m==null?void 0:m.canvas.width,m==null?void 0:m.canvas.height);let z=performance.now();a!==y.currentTime&&(a=y.currentTime,b=c.detectForVideo(y,z));const q=b==null?void 0:b.landmarks;if(q){const ve=q[0]??[];t(13,u=ve.map(V=>[V.x,V.y]).flat()),n&&((y==null?void 0:y.currentTime)??0)-p>=qe&&(d.emit("send_landmarks",u),p=y.currentTime);const Y=new Pe(m);for(const V of q)Y.drawConnectors(V,He.HAND_CONNECTIONS,{color:"#00FF00",lineWidth:5}),Y.drawLandmarks(V,{color:"#FF0000",lineWidth:2});m.restore()}}f&&window.requestAnimationFrame(()=>B(m))},me=async()=>{confirm("Save this Dataset ?")&&(je.writeFileSync("/dataset.json",JSON.stringify({labels:h,samples:r}),"utf8"),alert("Dataset Created successfully !"))};function _e(){T=this.value,t(3,T)}const pe=()=>t(0,s=!0);function he(){k=this.value,t(8,k)}function be(m){y=m,t(6,y)}function ge(m){f=m,t(7,f)}const ke=()=>t(4,i=!i);return o.$$.update=()=>{if(o.$$.dirty[0]&8207&&s){let m=h.findIndex(z=>z===T);m===-1&&(t(1,h=[...h,T]),t(2,r=[...r,[]]),m=h.length-1),t(2,r[m]=[...r[m],u],r),console.log(h),console.log(r),t(0,s=!1)}o.$$.dirty[0]&16384&&n&&w()},[s,h,r,T,i,g,y,f,k,A,H,B,me,u,n,_e,pe,he,be,ge,ke]}class tt extends Oe{constructor(e){super(),Se(this,e,Xe,Re,ye,{},null,[-1,-1])}}export{tt as component,et as universal};
