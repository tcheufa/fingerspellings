import{s as Te,p as Z,e as E,a as F,c as L,b as M,g as I,o as W,f as v,l as D,i as C,h as N,v as U,q as x,m as fe,k as ye,B as we,w as Ce,r as ee,t as O,d as S,u as $,C as Ne,j as ce,n as X}from"../chunks/scheduler.DKJAPN-h.js";import{S as Ee,i as Le,e as te,c as J,a as K,m as G,t as H,b as B,f as ue,d as Q,h as le,g as de}from"../chunks/index.CxtROXWl.js";import{e as q}from"../chunks/each.D6YF6ztN.js";import{f as ne}from"../chunks/index.xUGaxHAS.js";import{H as Ae,o as De}from"../chunks/HandTrackSettings.BNquQzm3.js";import{W as Fe}from"../chunks/Webcam.Cz2Ik1Uo.js";import{X as Ie,k as Oe,l as Se,N as He,A as Pe,F as Ue}from"../chunks/index.DAi3l8QA.js";const Be={};function se(o,e,t){const l=o.slice();return l[3]=e[t],l[30]=t,l}function oe(o,e,t){const l=o.slice();return l[31]=e[t],l[33]=t,l}function ie(o){let e,t,l,a;return t=new Ae({}),{c(){e=E("div"),J(t.$$.fragment),this.h()},l(s){e=L(s,"DIV",{class:!0});var i=M(e);K(t.$$.fragment,i),i.forEach(v),this.h()},h(){D(e,"class","bg-tertiary-600 p-3 rounded-md absolute top-1 left-0 z-10")},m(s,i){C(s,e,i),G(t,e,null),a=!0},i(s){a||(H(t.$$.fragment,s),s&&Ce(()=>{a&&(l||(l=le(e,ne,{x:-10,duration:500},!0)),l.run(1))}),a=!0)},o(s){B(t.$$.fragment,s),s&&(l||(l=le(e,ne,{x:-10,duration:500},!1)),l.run(0)),a=!1},d(s){s&&v(e),Q(t),s&&l&&l.end()}}}function Me(o){let e,t,l,a;return{c(){e=E("div"),t=E("input"),this.h()},l(s){e=L(s,"DIV",{class:!0});var i=M(e);t=L(i,"INPUT",{class:!0}),i.forEach(v),this.h()},h(){D(t,"class","min-w-fit p-1 text-center text-sm text-yellow-300 bg-black border-none"),D(e,"class","container flex justify-center mb-1")},m(s,i){C(s,e,i),N(e,t),$(t,o[8]),l||(a=U(t,"input",o[17]),l=!0)},p(s,i){i[0]&256&&t.value!==s[8]&&$(t,s[8])},i:X,o:X,d(s){s&&v(e),l=!1,a()}}}function Ve(o){let e,t;return e=new Ue({}),{c(){J(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,a){G(e,l,a),t=!0},p:X,i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function je(o){let e,t,l,a;const s=[Ve,Me],i=[];function _(p,b){return p[5]?0:1}return e=_(o),t=i[e]=s[e](o),{c(){t.c(),l=ee()},l(p){t.l(p),l=ee()},m(p,b){i[e].m(p,b),C(p,l,b),a=!0},p(p,b){let h=e;e=_(p),e===h?i[e].p(p,b):(de(),B(i[h],1,1,()=>{i[h]=null}),ue(),t=i[e],t?t.p(p,b):(t=i[e]=s[e](p),t.c()),H(t,1),t.m(l.parentNode,l))},i(p){a||(H(t),a=!0)},o(p){B(t),a=!1},d(p){p&&v(l),i[e].d(p)}}}function We(o){let e,t='<img src="/svg/keyboard.svg" title="keyboard" alt="keyboard" class="btn btn-icon-sm rounded-full p-1 bg-slate-200"/>',l,a,s="Toggle Prediction",i,_,p,b,h,r,u="Add",g,n,A="Save",P,T;return{c(){e=E("button"),e.innerHTML=t,l=F(),a=E("button"),a.textContent=s,i=F(),_=E("label"),p=O(`Add with label
                `),b=E("input"),h=F(),r=E("button"),r.textContent=u,g=F(),n=E("button"),n.textContent=A,this.h()},l(d){e=L(d,"BUTTON",{type:!0,title:!0,"data-svelte-h":!0}),W(e)!=="svelte-p1excn"&&(e.innerHTML=t),l=I(d),a=L(d,"BUTTON",{"data-svelte-h":!0}),W(a)!=="svelte-dmpam2"&&(a.textContent=s),i=I(d),_=L(d,"LABEL",{for:!0});var f=M(_);p=S(f,`Add with label
                `),b=L(f,"INPUT",{type:!0}),h=I(f),r=L(f,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),W(r)!=="svelte-11i50tb"&&(r.textContent=u),f.forEach(v),g=I(d),n=L(d,"BUTTON",{"data-svelte-h":!0}),W(n)!=="svelte-151sx4g"&&(n.textContent=A),this.h()},h(){D(e,"type","button"),D(e,"title","keyboard"),D(b,"type","text"),D(r,"id","add"),D(r,"class","bg-yellow-800"),D(_,"for","add")},m(d,f){C(d,e,f),C(d,l,f),C(d,a,f),C(d,i,f),C(d,_,f),N(_,p),N(_,b),$(b,o[3]),N(_,h),N(_,r),C(d,g,f),C(d,n,f),P||(T=[U(e,"click",o[9]),U(a,"click",o[10]),U(b,"input",o[15]),U(r,"click",o[16]),U(n,"click",o[12])],P=!0)},p(d,f){f[0]&8&&b.value!==d[3]&&$(b,d[3])},d(d){d&&(v(e),v(l),v(a),v(i),v(_),v(g),v(n)),P=!1,Ne(T)}}}function ae(o){let e,t,l=o[31]+"",a;return{c(){e=O(o[33]),t=O(": "),a=O(l)},l(s){e=S(s,o[33]),t=S(s,": "),a=S(s,l)},m(s,i){C(s,e,i),C(s,t,i),C(s,a,i)},p(s,i){i[0]&4&&l!==(l=s[31]+"")&&ce(a,l)},d(s){s&&(v(e),v(t),v(a))}}}function re(o){let e,t,l=o[3]+"",a,s,i,_,p,b,h=q(o[2][o[30]]),r=[];for(let u=0;u<h.length;u+=1)r[u]=ae(oe(o,h,u));return{c(){e=O(`...
            `),t=E("details"),a=O(l),s=O(`:
                `),i=E("details"),_=O(o[30]),p=F();for(let u=0;u<r.length;u+=1)r[u].c();b=F()},l(u){e=S(u,`...
            `),t=L(u,"DETAILS",{});var g=M(t);a=S(g,l),s=S(g,`:
                `),i=L(g,"DETAILS",{});var n=M(i);_=S(n,o[30]),p=I(n);for(let A=0;A<r.length;A+=1)r[A].l(n);n.forEach(v),b=I(g),g.forEach(v)},m(u,g){C(u,e,g),C(u,t,g),N(t,a),N(t,s),N(t,i),N(i,_),N(i,p);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(i,null);N(t,b)},p(u,g){if(g[0]&2&&l!==(l=u[3]+"")&&ce(a,l),g[0]&4){h=q(u[2][u[30]]);let n;for(n=0;n<h.length;n+=1){const A=oe(u,h,n);r[n]?r[n].p(A,g):(r[n]=ae(A),r[n].c(),r[n].m(i,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=h.length}},d(u){u&&(v(e),v(t)),fe(r,u)}}}function Re(o){let e,t,l,a,s,i,_,p="Toggle <br/> Options",b,h,r,u,g,n=o[4]&&ie();function A(c){o[18](c)}function P(c){o[19](c)}let T={onCanvasProcess:o[11],$$slots:{controlPlus:[We],caption:[je]},$$scope:{ctx:o}};o[6]!==void 0&&(T.video=o[6]),o[7]!==void 0&&(T.playing=o[7]),l=new Fe({props:T}),Z.push(()=>te(l,"video",A)),Z.push(()=>te(l,"playing",P));let d=q(o[1]),f=[];for(let c=0;c<d.length;c+=1)f[c]=re(se(o,d,c));return{c(){e=E("div"),n&&n.c(),t=F(),J(l.$$.fragment),i=F(),_=E("button"),_.innerHTML=p,b=F(),h=E("div");for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){e=L(c,"DIV",{class:!0});var k=M(e);n&&n.l(k),t=I(k),K(l.$$.fragment,k),i=I(k),_=L(k,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(_)!=="svelte-lk6k1k"&&(_.innerHTML=p),b=I(k),h=L(k,"DIV",{class:!0});var y=M(h);for(let w=0;w<f.length;w+=1)f[w].l(y);y.forEach(v),k.forEach(v),this.h()},h(){D(_,"type","button"),D(_,"class","btn bg-secondary-600 absolute right-3 top-1 z-20"),D(h,"class","min-h-10 w-full bg-slate-400 text-black"),D(e,"class","min-w-full min-h-full mx-2 relative flex flex-col justify-center items-center")},m(c,k){C(c,e,k),n&&n.m(e,null),N(e,t),G(l,e,null),N(e,i),N(e,_),N(e,b),N(e,h);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(h,null);r=!0,u||(g=U(_,"click",o[20]),u=!0)},p(c,k){c[4]?n?k[0]&16&&H(n,1):(n=ie(),n.c(),H(n,1),n.m(e,t)):n&&(de(),B(n,1,1,()=>{n=null}),ue());const y={};if(k[0]&297|k[1]&8&&(y.$$scope={dirty:k,ctx:c}),!a&&k[0]&64&&(a=!0,y.video=c[6],x(()=>a=!1)),!s&&k[0]&128&&(s=!0,y.playing=c[7],x(()=>s=!1)),l.$set(y),k[0]&6){d=q(c[1]);let w;for(w=0;w<d.length;w+=1){const V=se(c,d,w);f[w]?f[w].p(V,k):(f[w]=re(V),f[w].c(),f[w].m(h,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=d.length}},i(c){r||(H(n),H(l.$$.fragment,c),r=!0)},o(c){B(n),B(l.$$.fragment,c),r=!1},d(c){c&&v(e),n&&n.d(),Q(l),fe(f,c),u=!1,g()}}}let $e=.001,qe=2;function ze(o,e,t){let l;ye(o,De,m=>t(27,l=m));let a=!1,s=!1,i=-1,_=0,p=0,b,h=[],r=[],u,g=!1,n=!1;const A=()=>t(5,g=!g),P=()=>{t(14,n=!n),t(7,c=!0)};let T,d,f,c,k,y;we(async()=>{console.log("Resolving...");const m=await Ie.forVisionTasks("/wasm");console.log("Creating landmark detector..."),console.log("Exporting the model..."),f=await Oe.createFromOptions(m,l),console.log("Model loaded successfully"),console.log(f)});const w=()=>{d=Se("http://127.0.0.1:5000"),d.on("response",function(m){console.log("Response from the server:",m),t(8,k+=m)})},V=m=>{if(((T==null?void 0:T.currentTime)??0)-_>=$e){if(_=T.currentTime,!f){alert("Wait! objectDetector not loaded yet.");return}m==null||m.save(),m==null||m.clearRect(0,0,m==null?void 0:m.canvas.width,m==null?void 0:m.canvas.height);let R=performance.now();i!==T.currentTime&&(i=T.currentTime,b=f.detectForVideo(T,R));const z=b==null?void 0:b.landmarks;if(z){const ve=z[0]??[];t(13,u=ve.map(j=>[j.x,j.y]).flat()),n&&((T==null?void 0:T.currentTime)??0)-p>=qe&&(d.emit("send_landmarks",u),p=T.currentTime);const Y=new He(m);for(const j of z)Y.drawConnectors(j,Pe.HAND_CONNECTIONS,{color:"#00FF00",lineWidth:5}),Y.drawLandmarks(j,{color:"#FF0000",lineWidth:2});m.restore()}}c&&window.requestAnimationFrame(()=>V(m))},me=async()=>{confirm("Save this Dataset ?")&&(Be.writeFileSync("/dataset.json",JSON.stringify({labels:h,samples:r}),"utf8"),alert("Dataset Created successfully !"))};function _e(){y=this.value,t(3,y)}const pe=()=>t(0,s=!0);function he(){k=this.value,t(8,k)}function be(m){T=m,t(6,T)}function ge(m){c=m,t(7,c)}const ke=()=>t(4,a=!a);return o.$$.update=()=>{if(o.$$.dirty[0]&8207&&s){let m=h.findIndex(R=>R===y);m===-1&&(t(1,h=[...h,y]),t(2,r=[...r,[]]),m=h.length-1),t(2,r[m]=[...r[m],u],r),console.log(h),console.log(r),t(0,s=!1)}o.$$.dirty[0]&16384&&n&&w()},[s,h,r,y,a,g,T,c,k,A,P,V,me,u,n,_e,pe,he,be,ge,ke]}class xe extends Ee{constructor(e){super(),Le(this,e,ze,Re,Te,{},null,[-1,-1])}}export{xe as component};
