import{s as le,v as R,e as T,a as L,c as w,b as V,g as S,r as A,f as g,p as k,i as v,h as O,w as H,x as q,k as re,y as ie,z as ae,A as X,n as M,B as ce,C as K}from"../chunks/scheduler.VvEOAcGf.js";import{S as ue,i as fe,e as G,c as j,b as D,m as E,t as h,a as y,f as Z,d as I,g as J,h as x}from"../chunks/index.DdEy3NLK.js";import{f as Q}from"../chunks/index.CY-iSCNX.js";import{H as de,o as me}from"../chunks/HandTrackSettings.BosQHSLf.js";import{W as pe}from"../chunks/Webcam.UPlAS8BV.js";import{X as _e,k as ge,l as be,N as he,A as ke,F as ve}from"../chunks/index.DwqczJVo.js";const ye=!1,Te=async({params:i})=>({sign:i.sign}),De=Object.freeze(Object.defineProperty({__proto__:null,load:Te,prerender:ye},Symbol.toStringTag,{value:"Module"}));function Y(i){let e,t,n,l;return t=new de({}),{c(){e=T("div"),j(t.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0});var r=V(e);D(t.$$.fragment,r),r.forEach(g),this.h()},h(){k(e,"class","bg-tertiary-600 p-3 rounded-md absolute top-1 left-0 z-10")},m(o,r){v(o,e,r),E(t,e,null),l=!0},i(o){l||(h(t.$$.fragment,o),o&&ae(()=>{l&&(n||(n=J(e,Q,{x:-10,duration:500},!0)),n.run(1))}),l=!0)},o(o){y(t.$$.fragment,o),o&&(n||(n=J(e,Q,{x:-10,duration:500},!1)),n.run(0)),l=!1},d(o){o&&g(e),I(t),o&&n&&n.end()}}}function we(i){let e,t,n,l;return{c(){e=T("div"),t=T("input"),this.h()},l(o){e=w(o,"DIV",{class:!0});var r=V(e);t=w(r,"INPUT",{class:!0}),r.forEach(g),this.h()},h(){k(t,"class","min-w-fit p-1 text-center text-sm text-yellow-300 bg-black border-none"),k(e,"class","container flex justify-center mb-1")},m(o,r){v(o,e,r),O(e,t),K(t,i[4]),n||(l=H(t,"input",i[10]),n=!0)},p(o,r){r&16&&t.value!==o[4]&&K(t,o[4])},i:M,o:M,d(o){o&&g(e),n=!1,l()}}}function $e(i){let e,t;return e=new ve({}),{c(){j(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,l){E(e,n,l),t=!0},p:M,i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){I(e,n)}}}function Ce(i){let e,t,n,l;const o=[$e,we],r=[];function m(s,f){return s[1]?0:1}return e=m(i),t=r[e]=o[e](i),{c(){t.c(),n=X()},l(s){t.l(s),n=X()},m(s,f){r[e].m(s,f),v(s,n,f),l=!0},p(s,f){let _=e;e=m(s),e===_?r[e].p(s,f):(x(),y(r[_],1,1,()=>{r[_]=null}),Z(),t=r[e],t?t.p(s,f):(t=r[e]=o[e](s),t.c()),h(t,1),t.m(n.parentNode,n))},i(s){l||(h(t),l=!0)},o(s){y(t),l=!1},d(s){s&&g(n),r[e].d(s)}}}function Ne(i){let e,t='<img src="/svg/keyboard.svg" title="keyboard" alt="keyboard" class="btn btn-icon-sm rounded-full p-1 bg-slate-200"/>',n,l,o="Toggle Prediction",r,m;return{c(){e=T("button"),e.innerHTML=t,n=L(),l=T("button"),l.textContent=o,this.h()},l(s){e=w(s,"BUTTON",{type:!0,title:!0,"data-svelte-h":!0}),A(e)!=="svelte-p1excn"&&(e.innerHTML=t),n=S(s),l=w(s,"BUTTON",{"data-svelte-h":!0}),A(l)!=="svelte-dmpam2"&&(l.textContent=o),this.h()},h(){k(e,"type","button"),k(e,"title","keyboard")},m(s,f){v(s,e,f),v(s,n,f),v(s,l,f),r||(m=[H(e,"click",i[5]),H(l,"click",i[6])],r=!0)},p:M,d(s){s&&(g(e),g(n),g(l)),r=!1,ce(m)}}}function Fe(i){let e,t,n,l,o,r,m,s="Toggle <br/> Options",f,_,F,u=i[0]&&Y();function p(c){i[11](c)}function C(c){i[12](c)}let b={onCanvasProcess:i[7],$$slots:{controlPlus:[Ne],caption:[Ce]},$$scope:{ctx:i}};return i[2]!==void 0&&(b.video=i[2]),i[3]!==void 0&&(b.playing=i[3]),n=new pe({props:b}),R.push(()=>G(n,"video",p)),R.push(()=>G(n,"playing",C)),{c(){e=T("div"),u&&u.c(),t=L(),j(n.$$.fragment),r=L(),m=T("button"),m.innerHTML=s,this.h()},l(c){e=w(c,"DIV",{class:!0});var d=V(e);u&&u.l(d),t=S(d),D(n.$$.fragment,d),r=S(d),m=w(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),A(m)!=="svelte-lk6k1k"&&(m.innerHTML=s),d.forEach(g),this.h()},h(){k(m,"type","button"),k(m,"class","btn bg-secondary-600 absolute right-3 top-1 z-20"),k(e,"class","min-w-full min-h-full mx-2 relative flex justify-center items-center")},m(c,d){v(c,e,d),u&&u.m(e,null),O(e,t),E(n,e,null),O(e,r),O(e,m),f=!0,_||(F=H(m,"click",i[13]),_=!0)},p(c,[d]){c[0]?u?d&1&&h(u,1):(u=Y(),u.c(),h(u,1),u.m(e,t)):u&&(x(),y(u,1,1,()=>{u=null}),Z());const $={};d&2097170&&($.$$scope={dirty:d,ctx:c}),!l&&d&4&&(l=!0,$.video=c[2],q(()=>l=!1)),!o&&d&8&&(o=!0,$.playing=c[3],q(()=>o=!1)),n.$set($)},i(c){f||(h(u),h(n.$$.fragment,c),f=!0)},o(c){y(u),y(n.$$.fragment,c),f=!1},d(c){c&&g(e),u&&u.d(),I(n),_=!1,F()}}}let Oe=.001,He=2;function Me(i,e,t){let n;re(i,me,a=>t(9,n=a));let l=!1,o=-1,r=0,m=0,s,f=!1,_=!1;const F=()=>t(1,f=!f),u=()=>{t(8,_=!_),t(3,c=!0)};let p,C,b,c,d;ie(async()=>{console.log("Resolving...");const a=await _e.forVisionTasks("/wasm");console.log("Creating landmark detector..."),console.log("Exporting the model..."),b=await ge.createFromOptions(a,n),console.log("Model loaded successfully"),console.log(b)});const $=()=>{C=be("http://127.0.0.1:5000"),C.on("response",function(a){console.log("Response from the server:",a),t(4,d+=a)})},U=a=>{if(((p==null?void 0:p.currentTime)??0)-r>=Oe){if(r=p.currentTime,!b){alert("Wait! objectDetector not loaded yet.");return}a==null||a.save(),a==null||a.clearRect(0,0,a==null?void 0:a.canvas.width,a==null?void 0:a.canvas.height);let W=performance.now();o!==p.currentTime&&(o=p.currentTime,s=b.detectForVideo(p,W));const P=s==null?void 0:s.landmarks;if(P){if(_){const N=P[0];if(N){const se=N.map(B=>[B.x,B.y]).flat();((p==null?void 0:p.currentTime)??0)-m>=He&&(C.emit("send_landmarks",se),m=p.currentTime)}}const z=new he(a);for(const N of P)z.drawConnectors(N,ke.HAND_CONNECTIONS,{color:"#00FF00",lineWidth:5}),z.drawLandmarks(N,{color:"#FF0000",lineWidth:2});a.restore()}}c&&(console.log("elapsed inner: ",r),window.requestAnimationFrame(()=>U(a)))};function ee(){d=this.value,t(4,d)}function te(a){p=a,t(2,p)}function ne(a){c=a,t(3,c)}const oe=()=>t(0,l=!l);return i.$$.update=()=>{i.$$.dirty&512&&console.log(n),i.$$.dirty&256&&_&&$()},[l,f,p,c,d,F,u,U,_,n,ee,te,ne,oe]}class Ee extends ue{constructor(e){super(),fe(this,e,Me,Fe,le,{})}}export{Ee as component,De as universal};
